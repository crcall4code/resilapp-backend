{% extends "base.html" %}
{% block title %}
    Comunidades
{% endblock %}
{% block head %}
    {{ super() }}
    <style>

    </style>
    <script
            src="https://code.jquery.com/jquery-3.4.1.js"
            integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
            crossorigin="anonymous" type="text/javascript"></script>
{% endblock %}
{% block body %}
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Comunidades</h1>
    </div>

    <!-- Content Row -->
    <div class="row">
        <div class="container" id="container">
            <h1>Bienvenido</h1> <!--Welcome -->
            <div id="communityInput" class="input-group-lg">
                <p class="lead">Indique su comunidad</p>
                <table>
                    <tr>
                        <td><p class="lead"></p>Provincia</td>
                        <td><p class="lead"></p>Canton</td>
                        <td><p class="lead"></p>Poblado</td>
                    </tr>
                    <tr>
                        <td><select id="state-select" class="js-data-example-ajax">PROVINCIA</select></td>
                        <td><select id="city-select" class="js-data-example-ajax"></select></td>
                        <td><select id="community-select" class="js-data-example-ajax"></select></td>
                    </tr>
                </table>
                <button id="search" type="button" class="btn btn-primary">Buscar Comunidad</button>
                <button id="create_community" type="button" class="btn btn-success" disabled>Guardar Comunidad</button>
                <button id="reload" type="button" class="btn btn-warning">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <table>
                <tr>
                    <td>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Comunidad</span>
                            </div>
                            <input id="community-name" type="text" size="50" class="form-control"
                                   placeholder="Comunidad">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">ID</span>
                            </div>
                            <input id="town-id" type="text" size="50" class="form-control" placeholder="ID">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Etapa</span>
                                <input id="community-stage" min="1" type="number" size="20" class="form-control" placeholder="Etapa">
                            </div>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Paso</span>
                                <input id="community-step" min="1" type="number" size="20" class="form-control"
                                   placeholder="Paso">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h4 class="small font-weight-bold">
                            Progreso de etapa
                            <span class="float-right" id="stage-progress">
                                100%
                            </span>
                        </h4>
                        <div class="progress mb-4">
                            <div id="stage-progress-bar" class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h4 class="small font-weight-bold">
                            Progreso total
                            <span class="float-right" id="total-progress">
                                100%
                            </span>
                        </h4>
                        <div class="progress mb-4">
                            <div id="total-progress-bar" class="progress-bar" role="progressbar" style="width: 100%" aria-valuenow="100"
                                 aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <h4 class="small font-weight-bold">
                            Pasos/Indicadores
                            <span class="float-right" id="step-progress">
                                50%
                            </span>
                        </h4>
                        <div class="progress mb-4">
                            <div id="step-progress-bar" class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50"
                                 aria-valuemin="0" aria-valuemax="25">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Paso actual</span>
                            </div>
                            <input id="current_badge" type="text" size="50" class="form-control" placeholder="ID">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Tipo</span>
                            </div>
                            <input id="current_badge_type" type="text" size="50" class="form-control" placeholder="ID">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div id="community-id" style="display: none;">
                            <input id="community_id" type="text" class="form-control">
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div id="community-rev" style="display: none;">
                            <input id="community_rev" type="text" class="form-control">
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Include all compiled plugins (below), or include individual files as needed -->

    <script src="{{ url_for('static', filename = 'antixss.js') }}" type="text/javascript"></script>

    <script src="{{ url_for('static', filename = 'js/query_community.js') }}" type="text/javascript"></script>

    <script>
    var community = {};
    {% if province %}
        community.state = "{{ province }}";
        community.city = "{{ canton }}";
        community.town = "{{ community }}";
    {% endif %}
    console.log("Community: "+JSON.stringify(community));
    </script>

{% endblock %}
